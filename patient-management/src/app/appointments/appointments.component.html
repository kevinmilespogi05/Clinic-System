<div class="appointment-container">
  <div class="card">
    <div class="card-title">Book an Appointment</div>
    <div class="slot-container">
      <div class="slot" [ngClass]="{ 'occupied-slot': isSlotOccupied(slot) }" *ngFor="let slot of appointmentSlots">
        <div class="slot-day">{{ slot.day }}</div>
        <div class="slot-date">{{ slot.date | date:'longDate' }}</div>
        <div class="slot-time">{{ slot.time }}</div>
        <button class="book-btn" [disabled]="isSlotOccupied(slot)" (click)="openBookingModal(slot)">
          <i class="bi bi-calendar-plus"></i> Book
        </button>
      </div>
    </div>
  </div>

  <div class="card appointment-card">
    <div class="card-title">Existing Appointments</div>
    <div class="appointment-list">
      <div class="appointment-item" *ngFor="let appointment of appointments">
        <div class="appointment-details">
          <div class="appointment-day">Day: {{ appointment.day }}</div>
          <div class="appointment-date">Date: {{ appointment.date }}</div>
          <div class="appointment-time">Time: {{ appointment.time }}</div>
          <div class="appointment-description"><strong>Description:</strong> {{ appointment.description }}</div>
          <div class="appointment-status">Status: <span [ngClass]="getStatusClass(appointment.status)">{{ appointment.status }}</span></div>
          <div class="appointment-service"><strong>Service:</strong> {{ appointment.service }}</div>
        </div>
        <button class="cancel-btn" *ngIf="appointment.status !== 'cancelled'" (click)="openCancelModal(appointment.id)">
          <i class="bi bi-x-circle"></i> Cancel
        </button>
        <button class="payment-btn" *ngIf="appointment.status === 'pending' && appointment.payment_status === 'pending'" (click)="openPaymentModal(appointment)">
          <i class="bi bi-credit-card"></i> Pay Now
        </button>
      </div>
    </div>
  </div>
</div>
