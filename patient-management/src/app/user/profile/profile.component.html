<div class="profile-container" *ngIf="profileData; else errorTemplate">
  <h1>Welcome, {{ profileData.name }}</h1>
  <p><strong>Username:</strong> {{ profileData.username }}</p>
  <p><strong>Contact Number:</strong> {{ profileData.contact_number }}</p>
  <p><strong>Date of Birth:</strong> {{ profileData.date_of_birth }}</p>
  <p><strong>Medical History:</strong> {{ profileData.medical_history || 'N/A' }}</p>

  <!-- Edit button -->
  <button *ngIf="!isEditing" (click)="toggleEdit()">Edit Profile</button>

  <!-- Profile Edit Form -->
  <div *ngIf="isEditing">
    <h2>Edit Profile</h2>
    <form (ngSubmit)="updateProfile()">
      <label for="name">Name:</label>
      <input type="text" id="name" [(ngModel)]="updatedProfileData.name" name="name" required>

      <label for="contact_number">Contact Number:</label>
      <input type="text" id="contact_number" [(ngModel)]="updatedProfileData.contact_number" name="contact_number" required>

      <label for="date_of_birth">Date of Birth:</label>
      <input type="date" id="date_of_birth" [(ngModel)]="updatedProfileData.date_of_birth" name="date_of_birth" required>

      <!-- Medical History -->
      <label for="medical_history">Medical History:</label>
      <textarea id="medical_history" [(ngModel)]="updatedProfileData.medical_history" name="medical_history"></textarea>

      <button type="submit">Save Changes</button>
      <button type="button" class="cancel" (click)="toggleEdit()">Cancel</button>
    </form>
  </div>
</div>

<ng-template #errorTemplate>
  <div class="error-message">
    <p *ngIf="errorMessage">{{ errorMessage }}</p>
    <p *ngIf="!errorMessage">Loading...</p>
  </div>
</ng-template>
